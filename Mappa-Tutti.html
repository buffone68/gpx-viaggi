<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <title>Tutti i viaggi</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <style>
    html, body { height:100%; margin:0; }
    #map { width:100%; height:100%; }
    /* bottone Menu */
    .menu-btn{
      position:absolute; right:12px; bottom:14px; z-index:10000;
      padding:6px 12px; border-radius:8px; border:1px solid #ccc;
      background:#fff; color:#000; text-decoration:none;
      font:14px system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      box-shadow:0 2px 7px rgba(0,0,0,.2);
    }
    .menu-btn:hover{ background:#f8f8f8; }
  </style>
</head>
<body>
  <div id="map"></div>
  <a class="menu-btn" href="index.html">üè† Menu</a>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet-gpx@1.7.0/gpx.js"></script>
  <script>
    // mappa
    const map = L.map('map').setView([20, 10], 2);

    // sfondi
    const osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19, attribution: '¬© OpenStreetMap'
    }).addTo(map);
    const esri = L.tileLayer(
      'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',
      { attribution: 'Tiles ¬© Esri' }
    );

    L.control.layers({ 'OSM': osm, 'Esri Satellite': esri }, null, {collapsed:true}).addTo(map);

    // === Inserisci qui TUTTI i tuoi GPX (usa gli URL raw di GitHub) ===
    const files = [
      // Esempi: SOSTITUISCI con i tuoi
      'https://raw.githubusercontent.com/buffone68/gpx-viaggi/refs/heads/main/2025.07-Namibia/2025-07-28-Giorno-01-Namibia.GPX',
      'https://raw.githubusercontent.com/buffone68/gpx-viaggi/refs/heads/main/2024.10-Uganda-Scimpanz√®/2024-10-24-Giorno-01-Uganda-ScimpanzeÃÄ.GPX',
      'https://raw.githubusercontent.com/buffone68/gpx-viaggi/refs/heads/main/2024.04-Sri-Lanka-Solo/2024-04-25-Giorno-01-Sri-Lanka-Solo.GPX',
      // ...aggiungi qui TUTTI gli altri file (anche tutti i giorni)
    ];

    // tavolozza colori semplice (verr√† ciclata)
    const colors = ['#e41a1c','#377eb8','#4daf4a','#984ea3','#ff7f00',
                    '#a65628','#f781bf','#1b9e77','#d95f02','#7570b3'];

    // inquadra tutto
    const overall = L.latLngBounds([]);
    let remaining = files.length;

    files.forEach((url, i) => {
      const color = colors[i % colors.length];

      new L.GPX(url, {
        async: true,
        polyline_options: { color, weight: 3, opacity: 0.95 },
        marker_options: {
          // niente pin: solo linee per colpo d'occhio
          startIconUrl: null,
          endIconUrl: null,
          shadowUrl: null,
          wptIconUrls: {}
        }
      })
      .on('loaded', e => {
        const b = e.target.getBounds?.();
        if (b && b.isValid && b.isValid()) overall.extend(b);
        if (--remaining === 0 && overall.isValid()) {
          map.fitBounds(overall, { padding: [20,20] });
        }
      })
      .addTo(map);
    });
  </script>
</body>
</html>
