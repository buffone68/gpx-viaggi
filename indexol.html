<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <title>Namibia 2025 – GPX</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-gpx/1.7.0/gpx.min.js"></script>
  <style>
    html,body,#map{height:100%;margin:0}
    .legend{position:absolute;top:10px;left:10px;background:#fff;padding:8px 10px;border-radius:6px;box-shadow:0 1px 5px rgba(0,0,0,.3);max-height:50%;overflow:auto;font:12px/1.2 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    .legend b{display:block;margin-bottom:6px}
    .legend div{margin:2px 0}
    .swatch{display:inline-block;width:10px;height:10px;margin-right:6px;border-radius:2px;vertical-align:middle}
  </style>
</head>
<body>
<div id="map"></div>
<div class="legend" id="legend"><b>Namibia 2025 – Giorni</b></div>
<script>
  const files = [
    'https://raw.githubusercontent.com/buffone68/gpx-viaggi/refs/heads/main/2025.07-Namibia/2025-07-28-Giorno-01-Namibia.GPX',
    'https://raw.githubusercontent.com/buffone68/gpx-viaggi/refs/heads/main/2025.07-Namibia/2025-07-29-Giorno-02-Namibia.GPX',
    'https://raw.githubusercontent.com/buffone68/gpx-viaggi/refs/heads/main/2025.07-Namibia/2025-07-30-Giorno-03-Namibia.GPX',
    'https://raw.githubusercontent.com/buffone68/gpx-viaggi/refs/heads/main/2025.07-Namibia/2025-07-31-Giorno-04-Namibia.GPX',
    'https://raw.githubusercontent.com/buffone68/gpx-viaggi/refs/heads/main/2025.07-Namibia/2025-08-01-Giorno-05-Namibia.GPX',
    'https://raw.githubusercontent.com/buffone68/gpx-viaggi/refs/heads/main/2025.07-Namibia/2025-08-02-Giorno-06-Namibia.GPX',
    'https://raw.githubusercontent.com/buffone68/gpx-viaggi/refs/heads/main/2025.07-Namibia/2025-08-03-Giorno-07-Namibia.GPX',
    'https://raw.githubusercontent.com/buffone68/gpx-viaggi/refs/heads/main/2025.07-Namibia/2025-08-04-Giorno-08-Namibia.GPX',
    'https://raw.githubusercontent.com/buffone68/gpx-viaggi/refs/heads/main/2025.07-Namibia/2025-08-05-Giorno-09-Namibia.GPX',
    'https://raw.githubusercontent.com/buffone68/gpx-viaggi/refs/heads/main/2025.07-Namibia/2025-08-06-Giorno-10-Namibia.GPX',
    'https://raw.githubusercontent.com/buffone68/gpx-viaggi/refs/heads/main/2025.07-Namibia/2025-08-07-Giorno-11-Namibia.GPX',
    'https://raw.githubusercontent.com/buffone68/gpx-viaggi/refs/heads/main/2025.07-Namibia/2025-08-08-Giorno-12-Namibia.GPX',
    'https://raw.githubusercontent.com/buffone68/gpx-viaggi/refs/heads/main/2025.07-Namibia/2025-08-09-Giorno-13-Namibia.GPX',
    'https://raw.githubusercontent.com/buffone68/gpx-viaggi/refs/heads/main/2025.07-Namibia/2025-08-10-Giorno-14-Namibia.GPX'
  ];
  const colors = ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00', '#a65628', '#f781bf', '#999999', '#1b9e77', '#d95f02', '#7570b3', '#e7298a', '#66a61e', '#e6ab02'];

  const map = L.map('map').setView([-22.56, 17.08], 5);

  // OSM tiles (no token)
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '© OpenStreetMap contributors'
  }).addTo(map);

  const bounds = L.latLngBounds([]);
  const legend = document.getElementById('legend');

  files.forEach((url, idx) => {
    const color = colors[idx % colors.length];
    new L.GPX(url, {
      async: true,
      polyline_options: { color: color, weight: 4, opacity: 0.95 },
      marker_options: { startIconUrl: null, endIconUrl: null, shadowUrl: null }
    })
    .on('loaded', function(e) {
      bounds.extend(e.target.getBounds());
      map.fitBounds(bounds, { padding: [20,20] });
      const name = url.split('/').pop().replace('.GPX','');
      const item = document.createElement('div');
      item.innerHTML = '<span class="swatch" style="background:'+color+'"></span>' + name;
      legend.appendChild(item);
    })
    .addTo(map);
  });
</script>
</body>
</html>
