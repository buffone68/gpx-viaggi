<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <title>Namibia 2025 ‚Äì GPX</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Leaflet + Leaflet-GPX -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-gpx/1.7.0/gpx.min.js"></script>

  <style>
    html, body { height:100%; margin:0; }
    #map { height:100vh; position:relative; z-index:1; }

    /* Bottone legenda */
    .legend-toggle{
      position:absolute; top:14px; left:10px; z-index:10000;
      padding:6px 10px; border-radius:8px; border:1px solid #ccc;
      background:#fff; cursor:pointer;
      font:13px system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      box-shadow:0 2px 7px rgba(0,0,0,.2);
    }

    /* Box legenda */
    .legend{
      position:absolute; top:60px; left:10px; background:#fff; padding:10px 12px;
      border-radius:8px; box-shadow:0 2px 7px rgba(0,0,0,.25);
      max-height:55%; overflow:auto;
      font:13px/1.35 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      z-index:9999
    }
    .legend .title{ font-weight:700; display:block; margin-bottom:8px }
    .legend div{ margin:6px 0 }
    .legend input[type="checkbox"]{ transform: translateY(1px); margin-right:6px; }

    /* chip colore */
    .swatch{
      display:inline-block; width:12px; height:12px; margin-right:8px;
      border-radius:3px; vertical-align:middle
    }

    /* collassa legenda */
    .legend.collapsed{ max-height:40px; overflow:hidden; }

    /* mobile: legenda pi√π stretta e chiusa di default */
    @media (max-width: 768px){
      .legend{ max-width: 78vw }
      .legend.collapsed{ max-height: 40px }
    }

    /* Bottone Menu in basso a destra */
    .menu-button {
      position: absolute;
      bottom: 14px;
      right: 10px;
      z-index: 10000;
      padding: 6px 12px;
      border-radius: 8px;
      border: 1px solid #ccc;
      background: #fff;
      cursor: pointer;
      font: 14px system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      box-shadow: 0 2px 7px rgba(0,0,0,.2);
      text-decoration: none;
      color: #000;
    }
    .menu-button:hover {
      background:#f8f8f8;
    }
  </style>
</head>
<body>

  <div id="map"></div>

  <!-- Bottone per comprimere/espandere la legenda -->
  <button id="lgToggle" class="legend-toggle" aria-expanded="true">Legenda</button>

  <!-- Bottone per tornare al menu principale -->
  <a href="index.html" class="menu-button">üè† Menu</a>

  <!-- Legenda -->
  <div class="legend" id="legend">
    <span class="title">Namibia 2025 ‚Äì Giorni</span>
  </div>

<script>
/* qui rimane invariato tutto il tuo JS */
</script>
</body>
</html>
